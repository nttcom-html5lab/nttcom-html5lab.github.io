var util=function(){var _=function(){return"now"in Date?Date.now():new Date};try{console.log("\n _   _  _____  __  __  _     ___    _       _    ___\n| |_| ||_   _||  \\/  || |   | __|  | |     / \\  | D )\n|  _  |  | |  | |\\/| || |__ |__ \\  | |__  / A \\ | D \\\n|_| |_|  |_|  |_|  |_||____||___/  |____|/_/¯\\_\\|___/\n\n         N T T   C o m m u n i c a t i o n s\n\nHi! Thank you for looking in the developer console!\nIf you have any cool ideas or see any bugs,\nplease submit a pull request.\n\nコンソールまで見てくれてありがとう！\nおもしろいアイデアや不具合などあれば、プルリクエストを送ってくださいね。\n\nhttps://github.com/html5lab/html5lab.github.io/")}catch(n){}return{getNow:_}}();
var flexvideo=function(){function t(t,n,i){function o(t){this.emit(t.originalEvent.type)}return L&&console.log("flexvideo.initialize()"),h=$(t),g=$(n),v=g.get(0),U.transform?g.css({width:N+"px",height:_+"px"}):h.find("img").css({width:"100%",height:"100%"}),x.on("resize",e),e(),U.video?void g.on("loadedmetadata",$.proxy(function(t){C=v.duration,this.emit(t.originalEvent.type)},this)).on("loadeddata",$.proxy(o,this)).on("timeupdate",$.proxy(o,this)).on("ended",$.proxy(o,this)).on("playing",$.proxy(o,this)).on("pause",$.proxy(function(){this.emit("paused")},this)):(p=$(i),p.show(),C=p.attr("data-duration")-0,p.find("img").each(function(){G.push($(this).attr("data-sec")-0)}),G.sort(function(t,e){return t-e}),void setTimeout($.proxy(function(){this.emit("loadedmetadata"),setTimeout($.proxy(function(){this.emit("loadeddata")},this),0)},this),0))}function e(){function t(t,e){switch(e){case"translate":var n=arguments[2],i=arguments[3];U.transform?t.transform=(t.transform?t.transform+" ":"")+"translate("+n+"px, "+i+"px)":(t.left=n+"px",t.top=i+"px");break;case"scale":var o=arguments[2];U.transform?t.transform=(t.transform?t.transform+" ":"")+"scale("+o+")":(t.width=N*o+"px",t.height=_*o+"px")}}var e=x.width(),n=x.height(),i={},o=0,r=0;e/n>N/_?(o=(n-e*_/N)/2,t(i,"translate",0,o),r=e/N,t(i,"scale",r)):(o=(e-n*N/_)/2,t(i,"translate",o,0),r=n/_,t(i,"scale",r)),h.css(i)}function n(t,e){return $(this).on(t,e),this}function i(t,e){return $(this).off(t,e),this}function o(t,e){return $(this).trigger(t,e),this}function r(){return L&&console.log("flexvideo.play()"),U.video?v.seeking?(L&&console.log("waiting for playing"),z++<V?void setTimeout(r,k):void(L&&console.log("waiting for playing time out"))):(z=0,void v.play()):(F=util.getNow(),O=setInterval($.proxy(c,this),j),void this.emit("playing"))}function a(){return L&&console.log("flexvideo.pause()"),U.video?void v.pause():(O&&(clearInterval(O),O=0),void this.emit("paused"))}function s(){return C}function u(t){function e(){for(var e=-1,n=G.length,i=0;n>i;i++)if(G[i]>t){e=i-1;break}return-1===e&&(e=n-1),e}function n(t,e,n,i){var o=p.find("img[data-sec="+G[t]+"]");e&&(o.attr("src")||o.attr("src",o.attr("data-src"))),n&&o.show(),i&&o.hide()}if(!U.video){var i=G.length,o=e();return(0===M||S!==o)&&(n(S,!1,!1,!0),n(o,!0,!0,!1),i-1>o?(B=o+1,n(B,!0,!1,!1)):B=o,L&&console.log("change picture "+o),S=o),M=t,this.emit("timeupdate"),void(t>=C&&(clearInterval(O),O=0,this.emit("ended")))}var r=/msie 9/.test(navigator.userAgent.toLowerCase());if(r){var a=util.getNow();if(w>a-y)return void(L&&console.log("ignored seeking because of too short interval. "+(a-y)+"ms"));console.log("seeked. "+(a-y)+"ms"),y=a}v.currentTime=t}function d(){return U.video?v.currentTime:M}function f(){return U.video?v.readyState:-1===C?A:H}function l(){return U.video?v.ended:M>=C}function c(){var t=util.getNow(),e=Math.min(M+(t-F)/1e3,C);F=t,$.proxy(u,this)(e)}function m(){return U.video?v.buffered:{length:1,start:function(){return G[S]},end:function(){return G[B]}}}var h,g,v,p,w=1e3,y=0,x=$(window),A=0,T=1,E=2,b=3,H=4,N=1280,_=720,k=100,V=50,z=0,C=-1,D="HTMLVideoElement"in window,I=/iphone/.test(navigator.userAgent.toLowerCase()),R=$("body").get(0).style,U={video:D&&!I,transform:"-webkit-transform"in R&&"-webkit-transform"||"-moz-transform"in R&&"-moz-transform"||"-ms-transform"in R&&"-ms-transform"||"-o-transform"in R&&"-o-transform"||"transform"in R&&"transform"},L=!0;if(L=L&&"console"in window,!U.video)var M=-1,G=[],O=0,S=0,B=0,F=util.getNow(),j=200;return U.video||$(window).on("beforeunload",function(){O&&(clearInterval(O),O=0)}),{support:U,HAVE_NOTHING:A,HAVE_METADATA:T,HAVE_CURRENT_DATA:E,HAVE_FUTURE_DATA:b,HAVE_ENOUGH_DATA:H,initialize:t,on:n,off:i,emit:o,play:r,pause:a,getDuration:s,setCurrentTime:u,getCurrentTime:d,getReadyState:f,getEnded:l,getBuffered:m}}();
var bgv=function(){function e(){G&&console.log("document.onready"),flexvideo.on("loadedmetadata",o).on("loadeddata",t).on("timeupdate",f).on("ended",l).on("playing",a).on("paused",s).initialize(".toppage-background","#video","#pictures"),E.addClass("isPausing"),G&&$("main").append('<section class="current-time-container"><span id="currentTime"></span> / <span id="duration"></span></section>'),flexvideo.support.video||$("#video").hide()}function o(){if(G&&console.log("flexvideo.onloadedmetadata"),flexvideo.pause(),Y=flexvideo.getDuration(),G){var e=(Math.floor(10*Y)/10).toFixed(1);$("#duration").text(e+"s")}}function n(){G&&console.log("window.onload"),C=!0,C&&S&&i()}function t(){G&&console.log("flexvideo.onloadeddata"),S=!0,C&&S&&i()}function i(){G&&console.log("bgv.initialize()"),setTimeout(function(){X=!0,r(),w()},0)}function l(){G&&console.log("flexvideo.onended"),x()}function a(){G&&console.log("flexvideo.onplaying"),A=!0,G&&console.log("isPlaying = true"),$("html").removeClass("isPausing").addClass("isPlaying")}function s(){G&&console.log("flexvideo.onpaused"),L||($("html").removeClass("isPlaying").addClass("isPausing"),A=!1,G&&console.log("isPlaying = false"))}function d(){C&&S&&(clearTimeout(k),k=setTimeout(r,100))}function r(){N=$(window).height(),q=z.scrollTop()||E.scrollTop(),D=M.height(),G&&console.log("bgv.measureSizes(); documentHeight = "+D+", windowHeight = "+N+", currentScroll = "+q),u()}function c(e){G&&e&&e.type&&console.log("document.on"+e.type),A&&x()}function u(){if(!A){if(flexvideo.getReadyState()===flexvideo.HAVE_NOTHING)return void(G&&console.warn("ignored scroll event because of readyState is "+flexvideo.getReadyState()));if(L)return void(G&&console.warn("scroll event was fired though isSuspended is true."));if(!X)return void(G&&console.warn("ignored scroll event because isInitialized is false."));G&&console.log("window.onscroll"),g()}}function g(){q=z.scrollTop()||E.scrollTop();var e=Y*q/(D-N);e=Math.max(Math.min(e,Y),0),G&&console.log("flexvideo.setCurrentTime("+e+")"),flexvideo.setCurrentTime(e),p(e)}function f(){return L?void(G&&console.warn("timeupdate event was fired though isSuspended is true.")):A?I&&F?(G&&console.log("ignored timeupdate event because of first play."),void(F=!1)):(G&&console.log("video.ontimeupdate"),void v()):void(G&&console.log("ignored timeupdate event because isPlaying is false."))}function v(){var e=flexvideo.getCurrentTime(),o=(D-N)*e/Y;G&&console.log("html / body.scrollTop("+o+")"),B.stop(!0,!1).animate({scrollTop:o},{duration:400,easing:"linear"}),p(e)}function p(e){var o=(Math.floor(10*e)/10).toFixed(1),n=flexvideo.getBuffered(),t=n.length,i=$(".buffered"),l=i.length;G&&$("#currentTime").text(o),$("#played").css({width:e/Y*100+"%"});for(var a=0;a<Math.max(t,l);a++)if(t>a){a>=l&&$('<div class="buffered"></div>').appendTo(".seek-bar");var s=n.start(a),d=n.end(a);i.eq(a).css({left:s/Y*100+"%",width:(d-s)/Y*100+"%"})}else i.eq(a).css({width:0})}function h(e){switch(G&&e&&e.target&&e.target.nodeName&&e.type&&console.log(e.target.nodeName+".on"+e.type),e.type){case"pageshow":L=!1;break;case"pagehide":L=!0;break;case"visibilitychange":switch(document.visibilityState){case"visible":L=!1;break;case"hidden":case"pretender":L=!0}}L!==R&&(R=L,G&&console.log("isSuspended = "+L+", isPlaying = "+A),A&&L&&(B.stop(!0,!0),flexvideo.pause()),!A||L||b()||setTimeout(flexvideo.play,0))}function m(e){G&&console.log("#playButton.onclick"),e.preventDefault(),A||w()}function y(e){G&&console.log("#pauseButton.onclick"),e.preventDefault(),A&&x()}function w(){G&&console.log("bgv.startPlaying()"),b()||flexvideo.play()}function x(){G&&console.log("bgv.stopPlaying()"),flexvideo.pause(),B.stop(!0,!0)}function b(){var e=flexvideo.getCurrentTime(),o=/(trident|msie)/.test(navigator.userAgent.toLowerCase()),n=flexvideo.support.video&&o;return flexvideo.getEnded()||-1===Y&&e>=Y||-1===Y&&n&&.5>Y-e}function T(e){O=e.originalEvent.touches[0].pageX,V=e.originalEvent.touches[0].pageY}function H(e){if(-1!==O){var o=e.originalEvent.touches[0].pageX,n=e.originalEvent.touches[0].pageY,t=Math.sqrt(Math.pow(O-o,2)+Math.pow(V-n,2));t>10&&(O=-1,V=-1,M.trigger("vwheel"))}}function P(){G&&console.log("document.ontouchend"),O=-1,V=-1}var C=!1,S=!1,k=null,M=$(document),E=$("html"),z=$("body"),B=$("html, body"),N=0,q=0,D=0,A=!1,F=!0,I="ontouchstart"in window,L=!1,R=!1,X=!1,Y=0,G=!0;G=G&&"console"in window;var O=-1,V=-1;return{readyHandler:e,windowLoadHandler:n,scrollHandler:u,resizeHandler:d,wheelHandler:c,visibilityChangeHandler:h,clickedPlayButtonHandler:m,clickedPauseButtonHandler:y,touchStartHandler:T,touchMoveHandler:H,touchEndHandler:P}}();
!function(){var n=$(document),o="ontouchstart"in window;o&&n.on("touchstart",bgv.touchStartHandler).on("touchmove",bgv.touchMoveHandler).on("touchend touchcancel",bgv.touchEndHandler),n.on("mousewheel DOMMouseScroll vwheel mousedown",bgv.wheelHandler),n.on("visibilitychange",bgv.visibilityChangeHandler).on("ready",function(){$("#playButton").on("click touchstart",bgv.clickedPlayButtonHandler),$("#pauseButton").on("click touchstart",bgv.clickedPauseButtonHandler),bgv.readyHandler()}),$(window).on("load",bgv.windowLoadHandler).on("scroll",bgv.scrollHandler).on("resize",bgv.resizeHandler).on("pageshow",bgv.visibilityChangeHandler).on("pagehide",bgv.visibilityChangeHandler)}();