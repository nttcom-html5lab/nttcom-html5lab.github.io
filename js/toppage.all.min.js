var util=function(){var n=function(){return"now"in Date?Date.now():new Date},o=navigator.userAgent.toLowerCase(),e=!0,t=/android/.test(o),i=/mobile/.test(o),r={iPhone:/iphone/.test(o),iPad:/ipad/.test(o),iPod:/ipod/.test(o),smartphone:t&&i,tablet:t&&!i},s=$("body").get(0).style,a={console:!(!window.console||!console.log),touch:"ontouchstart"in window,video:"HTMLVideoElement"in window,transform:"-webkit-transform"in s&&"-webkit-transform"||"-moz-transform"in s&&"-moz-transform"||"-ms-transform"in s&&"-ms-transform"||"-o-transform"in s&&"-o-transform"||"transform"in s&&"transform"},_={iOS:r.iPhone||r.iPad||r.iPod,android:t};if(_.iOS){var l=o.match(/os ([\d_]+)/);l&&l.length>1&&(_.version=l[1].replace("_","."))}var m={ie:/(trident|msie)/.test(navigator.userAgent.toLowerCase())};if(m.ie){var d=o.match(/(msie |rv:)([\d\.]+)/);d&&d.length>2&&(m.version=d[2])}var u=m.ie&&/^9/.test(m.version);if(a.inlineVideo=a.video&&!r.iPhone&&!r.iPod&&!r.smartphone&&!u,_.iOS){var c=/^[^2-6]/.test(_.version);if(c){var h=window.innerHeight,v=setInterval(function(){var n=window.innerHeight;h!==n&&(h=n,$(window).trigger("iosstatusbarvisibilitychange"))},1e3);$(window).on("unload",function(){clearInterval(v)})}}return a.console&&console.log("\n _   _  _____  __  __  _     ___    _       _    ___\n| |_| ||_   _||  \\/  || |   | __|  | |     / \\  | D )\n|  _  |  | |  | |\\/| || |__ |__ \\  | |__  / A \\ | D \\\n|_| |_|  |_|  |_|  |_||____||___/  |____|/_/¯\\_\\|___/\n\n         N T T   C o m m u n i c a t i o n s\n\nHi! Thank you for looking in the developer console!\nIf you have any cool ideas or see any bugs,\nplease submit a pull request.\n\nコンソールまで見てくれてありがとう！\nおもしろいアイデアや不具合などあれば、プルリクエストを送ってくださいね。\n\nhttps://github.com/nttcom-html5lab/nttcom-html5lab.github.io"),{getNow:n,isDebug:e&&a.console,support:a,os:_,browser:m}}();
var flexvideo=function(){function t(t,e,n,o,r){util.isDebug&&console.log("flexvideo.initialize()");var a=$(document.createDocumentFragment());if(util.support.inlineVideo)g=$("<video>").attr({id:"video",autoplay:"autoplay"}),m=g.get(0),$.each(w,function(){$("<source>").attr({src:e+"."+this,type:"video/"+this}).appendTo(g)}),a.append(g),util.support.transform&&g.css({width:O+"px",height:S+"px"}),g.on("loadedmetadata",$.proxy(function(){z=m.duration,this.emit("loadedmetadata")},this)).on("loadeddata",$.proxy(function(){this.emit("loadeddata")},this)).on("timeupdate",$.proxy(function(){this.emit("timeupdate")},this)).on("ended",$.proxy(function(){this.emit("ended")},this)).on("playing",$.proxy(function(){this.emit("playing")},this)).on("pause",$.proxy(function(){this.emit("paused")},this));else{v=$("<div>").attr("id","pictures");for(var u=0;o>=u;u+=r){var s=n.replace("%{sec}",u)+"."+x,l=$("<img>").attr({"data-sec":u,"data-src":s}).appendTo(v);0===u&&l.attr("src",s),G.push(u)}a.append(v),v.show(),util.support.transform||h.find("img").css({width:"100%",height:"100%"}),z=o,setTimeout($.proxy(function(){this.emit("loadedmetadata"),setTimeout($.proxy(function(){this.emit("loadeddata")},this),0)},this),0)}h=$(t).append(a),y.on("resize iosstatusbarvisibilitychange",i),i()}function i(t){function i(t,i){switch(i){case"translate":var e=arguments[2],n=arguments[3];util.support.transform?t.transform=(t.transform?t.transform+" ":"")+"translate("+e+"px, "+n+"px)":(t.left=e+"px",t.top=n+"px");break;case"scale":var o=arguments[2];util.support.transform?t.transform=(t.transform?t.transform+" ":"")+"scale("+o+")":(t.width=O*o+"px",t.height=S*o+"px")}}if(t&&t.type&&console.log("window.on"+t.type),C)var e=window.innerWidth,n=window.innerHeight;else var e=y.width(),n=y.height();n-=T;var o={},r=0,a=0;e/n>O/S?(r=(n-e*S/O)/2,i(o,"translate",0,r+T),a=e/O,i(o,"scale",a)):(r=(e-n*O/S)/2,i(o,"translate",r,T),a=n/S,i(o,"scale",a)),h.css(o)}function e(t,i){return $(this).on(t,i),this}function n(t,i){return $(this).off(t,i),this}function o(t,i){return $(this).trigger(t,i),this}function r(){return util.isDebug&&console.log("flexvideo.play()"),util.support.inlineVideo?m.seeking?(util.isDebug&&console.log("waiting for playing"),k++<U?void setTimeout(r,R):void(util.isDebug&&console.log("waiting for playing time out"))):(k=0,void m.play()):(W=util.getNow(),M=setInterval($.proxy(c,this),q),void this.emit("playing"))}function a(){return util.isDebug&&console.log("flexvideo.pause()"),util.support.inlineVideo?void m.pause():(M&&(clearInterval(M),M=0),void this.emit("paused"))}function u(){return z}function s(t){function i(){for(var i=-1,e=G.length,n=0;e>n;n++)if(G[n]>t){i=n-1;break}return-1===i&&(i=e-1),i}function e(t,i,e,n){var o=v.find("img[data-sec="+G[t]+"]");i&&(o.attr("src")||o.attr("src",o.attr("data-src"))),e&&o.show(),n&&o.hide()}if(util.support.inlineVideo)return void(m.currentTime=t);var n=G.length,o=i();(0===F||j!==o)&&(e(j,!1,!1,!0),e(o,!0,!0,!1),n-1>o?(B=o+1,e(B,!0,!1,!1)):B=o,util.isDebug&&console.log("change picture "+o),j=o),F=t,this.emit("timeupdate"),t>=z&&(clearInterval(M),M=0,this.emit("ended"))}function l(){return util.support.inlineVideo?m.currentTime:F}function d(){return util.support.inlineVideo?m.readyState:-1===z?V:E}function p(){return util.support.inlineVideo?m.ended:F>=z}function c(){var t=util.getNow(),i=Math.min(F+(t-W)/1e3,z);W=t,$.proxy(s,this)(i)}function f(){return util.support.inlineVideo?m.buffered:{length:1,start:function(){return G[j]},end:function(){return G[B]}}}var h,g,m,v,y=$(window),w=["webm","mp4"],x="jpg",T=50,V=0,A=1,b=2,D=3,E=4,H=1280,_=720,N=960,I=540,R=100,U=50,k=0,z=-1;if(util.os.iOS)var C=/^[^2-6]/.test(util.os.version);var O=util.support.inlineVideo?H:N,S=util.support.inlineVideo?_:I;if(!util.support.inlineVideo)var F=-1,G=[],M=0,j=0,B=0,W=util.getNow(),q=200;return util.support.inlineVideo||$(window).on("beforeunload",function(){M&&(clearInterval(M),M=0)}),{HAVE_NOTHING:V,HAVE_METADATA:A,HAVE_CURRENT_DATA:b,HAVE_FUTURE_DATA:D,HAVE_ENOUGH_DATA:E,initialize:t,on:e,off:n,emit:o,play:r,pause:a,getDuration:u,setCurrentTime:s,getCurrentTime:l,getReadyState:d,getEnded:p,getBuffered:f}}();
var bgv=function(){function e(){util.isDebug&&console.log("document.onready"),flexvideo.on("loadedmetadata",i).on("loadeddata",t).on("timeupdate",f).on("ended",l).on("playing",s).on("paused",u).initialize(Y,A,G,L,_),util.isDebug&&$("main").append('<section class="current-time-container"><span id="currentTime"></span> / <span id="duration"></span></section>'),util.support.inlineVideo?$("#pictures").hide():$("#video").hide()}function i(){if(util.isDebug&&console.log("flexvideo.onloadedmetadata"),flexvideo.pause(),X=flexvideo.getDuration(),util.isDebug){var e=(Math.floor(10*X)/10).toFixed(1);$("#duration").text(e+"s")}}function o(){util.isDebug&&console.log("window.onload"),P=!0,P&&S&&n()}function t(){util.isDebug&&console.log("flexvideo.onloadeddata"),S=!0,P&&S&&n()}function n(){util.isDebug&&console.log("bgv.initialize()"),k.addClass("isPausing"),setTimeout(function(){R=!0,d()},0)}function l(){util.isDebug&&console.log("flexvideo.onended"),y()}function s(){util.isDebug&&console.log("flexvideo.onplaying"),V=!0,util.isDebug&&console.log("isPlaying = true"),$("html").removeClass("isPausing").addClass("isPlaying")}function u(){util.isDebug&&console.log("flexvideo.onpaused"),I||($("html").removeClass("isPlaying").addClass("isPausing"),V=!1,util.isDebug&&console.log("isPlaying = false"))}function a(){P&&S&&(clearTimeout(C),C=setTimeout(d,100))}function d(){B=j?window.innerHeight:$(window).height(),N=E.scrollTop()||k.scrollTop(),q=M.height(),util.isDebug&&console.log("bgv.measureSizes(); documentHeight = "+q+", windowHeight = "+B+", currentScroll = "+N),c()}function r(e){util.isDebug&&e&&e.type&&console.log("document.on"+e.type),V&&y()}function c(){if(!V){if(flexvideo.getReadyState()===flexvideo.HAVE_NOTHING)return void(util.isDebug&&console.warn("ignored scroll event because of readyState is "+flexvideo.getReadyState()));if(I)return void(util.isDebug&&console.warn("scroll event was fired though isSuspended is true."));if(!R)return void(util.isDebug&&console.warn("ignored scroll event because isInitialized is false."));util.isDebug&&console.log("window.onscroll"),g()}}function g(){N=E.scrollTop()||k.scrollTop();var e=X*N/(q-B);e=Math.max(Math.min(e,X),0),util.isDebug&&console.log("flexvideo.setCurrentTime("+e+")"),flexvideo.setCurrentTime(e),p(e)}function f(){return I?void(util.isDebug&&console.warn("timeupdate event was fired though isSuspended is true.")):V?util.support.touch&&F?(util.isDebug&&console.log("ignored timeupdate event because of first play."),void(F=!1)):(util.isDebug&&console.log("video.ontimeupdate"),void v()):void(util.isDebug&&console.log("ignored timeupdate event because isPlaying is false."))}function v(){var e=flexvideo.getCurrentTime(),i=(q-B)*e/X;util.isDebug&&console.log("html / body.scrollTop("+i+")"),z.stop(!0,!1).animate({scrollTop:i},{duration:400,easing:"linear"}),p(e)}function p(e){var i=(Math.floor(10*e)/10).toFixed(1),o=flexvideo.getBuffered(),t=o.length,n=$(".buffered"),l=n.length;util.isDebug&&$("#currentTime").text(i),$("#played").css({width:e/X*100+"%"});for(var s=0;s<Math.max(t,l);s++)if(t>s){s>=l&&$('<div class="buffered"></div>').appendTo(".seek-bar");var u=o.start(s),a=o.end(s);n.eq(s).css({left:u/X*100+"%",width:(a-u)/X*100+"%"})}else n.eq(s).css({width:0})}function b(e){switch(util.isDebug&&e.type&&(e.target&&e.target.nodeName?console.log(e.target.nodeName+".on"+e.type):e.target===window&&console.log("window.on"+e.type)),e.type){case"pageshow":I=!1;break;case"pagehide":I=!0;break;case"visibilitychange":switch(document.visibilityState){case"visible":I=!1;break;case"hidden":case"pretender":I=!0}}I!==O&&(O=I,util.isDebug&&console.log("isSuspended = "+I+", isPlaying = "+V),V&&I&&(z.stop(!0,!0),flexvideo.pause()),!V||I||w()||setTimeout($.proxy(flexvideo.play,flexvideo),0))}function h(e){util.isDebug&&console.log("#playButton.onclick"),e.preventDefault(),V||D()}function m(e){util.isDebug&&console.log("#pauseButton.onclick"),e.preventDefault(),V&&y()}function D(){util.isDebug&&console.log("bgv.startPlaying()"),w()||flexvideo.play()}function y(){util.isDebug&&console.log("bgv.stopPlaying()"),flexvideo.pause(),z.stop(!0,!0)}function w(){var e=flexvideo.getCurrentTime(),i=util.support.inlineVideo&&util.browser.ie;return flexvideo.getEnded()||-1===X&&e>=X||-1===X&&i&&.5>X-e}function x(e){J=e.originalEvent.touches[0].pageX,K=e.originalEvent.touches[0].pageY}function T(e){if(-1!==J){var i=e.originalEvent.touches[0].pageX,o=e.originalEvent.touches[0].pageY,t=Math.sqrt(Math.pow(J-i,2)+Math.pow(K-o,2));t>10&&(J=-1,K=-1,M.trigger("vwheel"))}}function H(){util.isDebug&&console.log("document.ontouchend"),J=-1,K=-1}var P=!1,S=!1,C=null,M=$(document),k=$("html"),E=$("body"),z=$("html, body"),B=0,N=0,q=0,V=!1,F=!0,I=!1,O=!1,R=!1,X=0,Y="#flexvideo",A="video/html5lab-min-1.0",G="video/html5lab-1.0-%{sec}",L=57,_=1;if(util.os.iOS)var j=/^[^2-6]/.test(util.os.version);var J=-1,K=-1;return{readyHandler:e,windowLoadHandler:o,scrollHandler:c,resizeHandler:a,wheelHandler:r,visibilityChangeHandler:b,clickedPlayButtonHandler:h,clickedPauseButtonHandler:m,touchStartHandler:x,touchMoveHandler:T,touchEndHandler:H}}();
!function(){var o=$(document);util.support.touch&&o.on("touchstart",bgv.touchStartHandler).on("touchmove",bgv.touchMoveHandler).on("touchend touchcancel",bgv.touchEndHandler),o.on("mousewheel DOMMouseScroll vwheel mousedown",bgv.wheelHandler),o.on("visibilitychange",bgv.visibilityChangeHandler).on("ready",function(){$("#playButton").on("click touchstart",bgv.clickedPlayButtonHandler),$("#pauseButton").on("click touchstart",bgv.clickedPauseButtonHandler),bgv.readyHandler()}),$(window).on("load",bgv.windowLoadHandler).on("scroll",bgv.scrollHandler).on("resize iosstatusbarvisibilitychange",bgv.resizeHandler).on("pageshow load",bgv.visibilityChangeHandler).on("pagehide blur",bgv.visibilityChangeHandler)}();